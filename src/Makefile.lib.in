all: $(SHARED_TARGET) $(STATIC_TARGET)

$(SHARED_TARGET): $(OBJECTS)
	gfortran -shared -fPIC $(FFLAGS) -o $@ $^

$(STATIC_TARGET): $(OBJECTS)
	ar rsc $(STATIC_TARGET) $^

obj/%.o: src/%.f
	@mkdir -p obj
	gfortran -fPIC $(FFLAGS) $(INCLUDES) -c -o $@ $^

clean:
	@rm -rf obj

.PHONY: clean
