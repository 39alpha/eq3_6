all: $(TARGET)

$(TARGET): $(MODOBJECTS) $(OBJECTS) $(LIBRARIES)
	gfortran -Wall -Wextra -Werror -pedantic -Wno-unused-variable -Wno-unused-label -Wno-character-truncation -Wno-unused-dummy-argument -Wno-maybe-uninitialized -Wno-do-subscript -Wno-compare-reals -Wno-unused-parameter $(FFLAGS) -Jmod -o $(TARGET) $^

obj/%.o: src/%.f90 $(MODOBJECTS)
	@mkdir -p mod obj
	gfortran -Wall -Wextra -Werror -pedantic -Wno-unused-variable -Wno-unused-label -Wno-character-truncation -Wno-unused-dummy-argument -Wno-maybe-uninitialized -Wno-do-subscript -Wno-compare-reals -Wno-unused-parameter $(FFLAGS) -Jmod -c $(INCLUDES) -o $@ $<

../../lib/libeqlib.a:
	+make -C ../eqlib

../../lib/libeqlibu.a:
	+make -C ../eqlibu

../../lib/libeqlibg.a:
	+make -C ../eqlibg

clean:
	@rm -rf obj mod

.PHONY: clean
